<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electron AI CSV</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        textarea { width: 80%; height: 100px; margin: 10px 0; }
        button { padding: 10px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Electron AI CSV Generator</h1>
    <input type="file" id="studentlist" name="studentlist"></input>
    <button onclick="upload()">Generate</button>
    <p id="generatedOutput"></p>
    <button onclick="saveToCSV()" style="display:none;">Save to CSV</button>

    <script>
        async function generateContent() {
            const input = document.getElementById("userInput").value;
            const output = await window.electronAPI.generateContent(input);

            document.getElementById("generatedOutput").innerText = "AI Output: " + output;
            document.querySelector("button[onclick='saveToCSV()']").style.display = "inline-block";
        }

        async function saveToCSV() {
            const output = document.getElementById("generatedOutput").innerText.replace("AI Output: ", "");
            const response = await window.electronAPI.updateCSV(output);
            alert(response);
        }

        async function upload() {
            const fileInput = document.getElementById("studentlist");
            const file = fileInput.files[0];

            if (!file) {
              alert("Please select a file first.");
              return;
            }

            try {
                const savedPath = await window.electronAPI.uploadFile(file);
                alert("Transcription complete! Saved to: " + savedPath);
            } catch (err) {
                alert("Error: " + err.message);
            }
        }
    </script>
</body>
</html>
