<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="style/style.css">
        <meta charset="UTF-8">
        <meta name="author" content="Midori Sugie">
        <title>Name Phonetics Generator</title>
    </head>
    <body>
        <header>
            <h1>Name Phonetics Generator</h1>
        </header>
        <main>
            <h2>Phonetics and Audio Representitve of names</h2>

            <a href class="download btn">download a csv file</a>

            <table id="phonetics-table">
                <thead>
                    <tr id="features-row">
                        <th class="first-col">First</th>
                        <th class="last-col">Last</th>
                        <th class="country-col">Country</th>
                        <th class="phonetics-col">Phonetics</th>
                        <th class="audio-col">Audio</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

            <a href="index.html" class="upload btn">upload a different csv file</a>
        </main>
        <footer>name phonetics generator</footer>
        <script>
        const transcriptionData = JSON.parse(sessionStorage.getItem("transcriptionData"));

            if (transcriptionData) {
                console.log(transcriptionData);
                const tableBody = document.getElementById("phonetics-table").getElementsByTagName("tbody")[0];
    
                transcriptionData.forEach(result => {
                    const row = document.createElement("tr");
    
                    const firstCell = document.createElement("td");
                    firstCell.classList.add("first-col");
                    firstCell.textContent = result.First;
                    row.appendChild(firstCell);

                    const lastCell = document.createElement("td");
                    lastCell.classList.add("last-col");
                    lastCell.textContent = result.Last;
                    row.appendChild(lastCell);
    
                    const countryCell = document.createElement("td");
                    countryCell.classList.add("country-col");

                    const countryList = document.createElement("ul");
                    result.Country.forEach(country => {
                        let countryItem = document.createElement("li")
                        countryItem.textContent = country;
                        countryList.appendChild(countryItem);
                    });
                    countryCell.appendChild(countryList);
                    row.appendChild(countryCell);
    
                    const translationCell = document.createElement("td")
                    translationCell.classList.add("phonetics-col");

                    const transList = document.createElement("ul");
                    result.Translation.forEach(translation => {
                        let transItem = document.createElement("li")
                        transItem.textContent = translation;
                        transList.appendChild(transItem);
                    }); 
                    translationCell.appendChild(transList);
                    row.appendChild(translationCell);

                    const audioCell = document.createElement("td");
                    audioCell.classList.add("audio-col");
                    audioCell.innerHTML = `<audio controls>
                                            <source src="" type="audio/mpeg">
                                            Your browser does not support the audio element.
                                            </audio>`;
                    row.appendChild(audioCell);

                    tableBody.appendChild(row);
                });
            } else {
                // Handle the case where data is not available
                alert("No transcription data found.");
            }
        </script>
    </body>
</html>